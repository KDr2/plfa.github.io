<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: Soundness of reduction with respect to denotational semantics</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-129" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-136" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-157" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the reduction semantics is sound with respect to the denotational semantics, i.e., for any term L</p><pre><code>L —↠ ƛ N  implies  ℰ L ≃ ℰ (ƛ N)</code></pre><p>The proof is by induction on the reduction sequence, so the main lemma concerns a single reduction step. We prove that if any term <code>M</code> steps to a term <code>N</code>, then <code>M</code> and <code>N</code> are denotationally equal. We shall prove each direction of this if-and-only-if separately. One direction will look just like a type preservation proof. The other direction is like proving type preservation for reduction going in reverse. Recall that type preservation is sometimes called subject reduction. Preservation in reverse is a well-known property and is called <em>subject expansion</em>. It is also well-known that subject expansion is false for most typed lambda calculi!</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1025" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1030" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1037" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1077" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1084" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1089" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1092" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1094" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1098" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1100" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1103" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1105" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1109" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1111" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1116" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1118" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1126" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1128" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1133" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1140" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1153" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1159" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1160" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1163" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1165" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1166" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1168" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1176" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1178" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1378" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1179" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1181" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1815" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1189" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1191" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1196" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1198" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1203" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1207" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1216" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1217" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1221" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1229" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1231" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1236" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1243" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1258" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1264" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1265" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#758" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1270" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1272" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1277" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1284" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1301" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1307" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1308" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#665" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1310" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1312" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1317" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1324" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1350" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1356" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1357" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.Negation.Core.html#787" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1370" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1372" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1377" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1384" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1395" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1401" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1402" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Empty.html#637" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1408" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1410" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1415" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1422" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1439" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1445" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1446" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1520" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1449" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1451" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1454" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1456" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1458" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1460" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1465" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1472" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1481" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1488" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1491" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1493" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1498" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1505" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-1529" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1535" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1536" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-1543" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1545" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-1548" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1550" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-1553" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1555" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-1558" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1560" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-1561" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1563" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-1564" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1566" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-1568" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1570" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-1572" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1574" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-1576" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1578" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-1581" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1595" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-1600" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1602" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-1606" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1608" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-1618" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1620" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-1623" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1625" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-1631" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1633" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-1637" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1651" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-1655" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1657" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-1659" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1661" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-1663" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1665" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-1666" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1668" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-1669" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1671" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-1675" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1677" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-1684" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1686" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-1688" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1690" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1695" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1702" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-1726" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1732" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1733" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-1739" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1741" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-1746" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1748" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-1751" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1753" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1758" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1765" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-1794" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1800" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1801" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-1806" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1808" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-1809" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1811" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-1814" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1816" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-1821" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1823" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-1827" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1829" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-1832" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1834" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-1838" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1840" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-1842" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1844" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-1848" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1850" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a><a id="plfa_plfa-part3-Soundness-1854" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1856" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a><a id="plfa_plfa-part3-Soundness-1860" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1862" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-1871" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1885" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-1891" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1893" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-1900" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1902" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-1909" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1911" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-1916" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1918" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-1931" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1933" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-1946" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1948" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-1954" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1968" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-1971" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1973" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-1979" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1981" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-1988" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1990" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-1997" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1999" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2006" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2008" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2011" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2025" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2036" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2038" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2039" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2041" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2044" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2046" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2055" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2060" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2067" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2092" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2098" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2099" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2115" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2117" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2124" class="Symbol">)</a>
</pre><h2 id="forward-reduction-preserves-denotations">Forward reduction preserves denotations</h2><p>The proof of preservation in this section mixes techniques from previous chapters. Like the proof of preservation for the STLC, we are preserving a relation defined separately from the syntax, in contrast to the intrinsically-typed terms. On the other hand, we are using de Bruijn indices for variables.</p><p>The outline of the proof remains the same in that we must prove lemmas concerning all of the auxiliary functions used in the reduction relation: substitution, renaming, and extension.</p><h3 id="simultaneous-substitution-preserves-denotations">Simultaneous substitution preserves denotations</h3><p>Our next goal is to prove that simultaneous substitution preserves meaning. That is, if <code>M</code> results in <code>v</code> in environment <code>γ</code>, then applying a substitution <code>σ</code> to <code>M</code> gives us a program that also results in <code>v</code>, but in an environment <code>δ</code> in which, for every variable <code>x</code>, <code>σ x</code> results in the same value as the one for <code>x</code> in the original environment <code>γ</code>. We write <code>δ `⊢ σ ↓ γ</code> for this condition.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-3131" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-3137" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-3139" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-3146" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3153" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3155" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-3157" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3159" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3160" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3162" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3164" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3168" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3170" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3172" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3178" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3180" href="../Soundness/#plfa_plfa-part3-Soundness-3157" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3182" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3184" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3188" href="../Soundness/#plfa_plfa-part3-Soundness-3159" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3190" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3192" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-3196" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3203" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3204" href="../Soundness/#plfa_plfa-part3-Soundness-3204" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3205" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-3207" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3208" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3210" href="../Soundness/#plfa_plfa-part3-Soundness-3210" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3212" href="../Soundness/#plfa_plfa-part3-Soundness-3212" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3214" href="../Soundness/#plfa_plfa-part3-Soundness-3214" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3216" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3218" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-3221" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3222" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3224" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3226" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3228" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-3230" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-3231" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3233" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3235" href="../Soundness/#plfa_plfa-part3-Soundness-3210" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3237" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-3239" href="../Soundness/#plfa_plfa-part3-Soundness-3212" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3241" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3243" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3245" href="../Soundness/#plfa_plfa-part3-Soundness-3214" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3247" href="../Soundness/#plfa_plfa-part3-Soundness-3222" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-3248" class="Symbol">)</a>
</pre><p>As usual, to prepare for lambda abstraction, we prove an extension lemma. It says that applying the <code>exts</code> function to a substitution produces a new substitution that maps variables to terms that when evaluated in <code>δ , v</code> produce the values in <code>γ , v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-3517" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3527" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3529" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-3531" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3532" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3534" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3536" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-3537" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3539" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3540" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3542" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3544" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3548" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3549" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3551" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3552" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3554" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3556" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3560" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3561" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-3565" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3567" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3568" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3570" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3572" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3578" href="../Soundness/#plfa_plfa-part3-Soundness-3532" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3580" href="../Soundness/#plfa_plfa-part3-Soundness-3534" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3581" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-3585" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3587" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3589" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3592" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3594" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3596" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-3601" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-3630" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3632" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3634" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3637" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-3639" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3642" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-3647" href="../Soundness/#plfa_plfa-part3-Soundness-3568" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3649" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3651" href="../Soundness/#plfa_plfa-part3-Soundness-3540" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3653" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3656" href="../Soundness/#plfa_plfa-part3-Soundness-3536" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-3658" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3668" href="../Soundness/#plfa_plfa-part3-Soundness-3668" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3670" href="../Soundness/#plfa_plfa-part3-Soundness-3670" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3672" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-3674" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3676" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-3680" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3690" href="../Soundness/#plfa_plfa-part3-Soundness-3690" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3692" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3694" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3695" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-3697" href="../Soundness/#plfa_plfa-part3-Soundness-3697" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3699" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3701" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3703" href="../Denotational/#plfa_plfa-part3-Denotational-23533" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-3715" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-3718" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-3721" href="../Soundness/#plfa_plfa-part3-Soundness-3721" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-3723" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3725" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-3731" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3733" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3734" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3736" href="../Soundness/#plfa_plfa-part3-Soundness-3697" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3738" class="Symbol">)</a>
</pre><p>The proof is by cases on the de Bruijn index <code>x</code>.</p><ul><li><p>If it is <code>Z</code>, then we need to show that <code>δ , v ⊢ # 0 ↓ v</code>, which we have by rule <code>var</code>.</p></li><li><p>If it is <code>S x′</code>,then we need to show that <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>, which we obtain by the <code>rename-pres</code> lemma.</p></li></ul><p>With the extension lemma in hand, the proof that simultaneous substitution preserves meaning is straightforward. Let’s dive in!</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-4155" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4166" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4168" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4170" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4171" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4173" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4175" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4176" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4178" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4179" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4181" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4183" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4187" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4188" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4190" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4191" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4193" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4195" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4199" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4200" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4202" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4203" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4205" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4207" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4209" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4211" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4212" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4216" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4218" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4219" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4221" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4223" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4229" href="../Soundness/#plfa_plfa-part3-Soundness-4171" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4231" href="../Soundness/#plfa_plfa-part3-Soundness-4173" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4232" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4236" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4238" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4240" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4243" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4245" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4247" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-4251" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4253" href="../Soundness/#plfa_plfa-part3-Soundness-4179" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4255" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4257" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4259" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4261" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-4267" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-4288" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4290" href="../Soundness/#plfa_plfa-part3-Soundness-4191" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4292" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4294" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-4300" href="../Soundness/#plfa_plfa-part3-Soundness-4219" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4302" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4304" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4306" href="../Soundness/#plfa_plfa-part3-Soundness-4175" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4308" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4319" href="../Soundness/#plfa_plfa-part3-Soundness-4319" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4321" href="../Soundness/#plfa_plfa-part3-Soundness-4321" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4323" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4324" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-4328" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4329" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-4331" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4333" href="../Soundness/#plfa_plfa-part3-Soundness-4333" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4334" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-4337" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4339" href="../Soundness/#plfa_plfa-part3-Soundness-4321" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4341" href="../Soundness/#plfa_plfa-part3-Soundness-4333" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-4343" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4354" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4356" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4358" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4359" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4366" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4369" href="../Soundness/#plfa_plfa-part3-Soundness-4369" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4371" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4373" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4377" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4384" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4385" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4396" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4398" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4400" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4402" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4404" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4405" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4416" href="../Soundness/#plfa_plfa-part3-Soundness-4354" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4418" href="../Soundness/#plfa_plfa-part3-Soundness-4356" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4420" href="../Soundness/#plfa_plfa-part3-Soundness-4369" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4422" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4424" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4435" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4437" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4439" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4440" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4448" href="../Soundness/#plfa_plfa-part3-Soundness-4448" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4449" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4451" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4455" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4463" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4464" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4475" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4478" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4479" href="../Soundness/#plfa_plfa-part3-Soundness-4479" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-4480" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4482" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4484" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4489" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-4490" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4492" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4493" href="../Soundness/#plfa_plfa-part3-Soundness-3517" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4503" href="../Soundness/#plfa_plfa-part3-Soundness-4435" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4505" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-4506" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4508" href="../Soundness/#plfa_plfa-part3-Soundness-4448" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4509" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4511" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4522" href="../Soundness/#plfa_plfa-part3-Soundness-4522" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4524" href="../Soundness/#plfa_plfa-part3-Soundness-4524" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4526" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-4534" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4536" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-4544" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4555" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4557" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4559" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4560" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4568" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4571" href="../Soundness/#plfa_plfa-part3-Soundness-4571" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4573" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4575" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4579" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4587" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4588" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4599" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4601" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4603" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4605" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4607" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4608" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4619" href="../Soundness/#plfa_plfa-part3-Soundness-4555" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4621" href="../Soundness/#plfa_plfa-part3-Soundness-4557" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4623" href="../Soundness/#plfa_plfa-part3-Soundness-4571" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4625" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4627" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4638" href="../Soundness/#plfa_plfa-part3-Soundness-4638" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4640" href="../Soundness/#plfa_plfa-part3-Soundness-4640" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4642" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4643" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4647" href="../Soundness/#plfa_plfa-part3-Soundness-4647" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4649" href="../Soundness/#plfa_plfa-part3-Soundness-4649" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-4651" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4653" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4655" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4659" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4660" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4671" href="../Soundness/#plfa_plfa-part3-Soundness-4638" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4673" href="../Soundness/#plfa_plfa-part3-Soundness-4640" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4675" href="../Soundness/#plfa_plfa-part3-Soundness-4647" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4676" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4678" href="../Soundness/#plfa_plfa-part3-Soundness-4649" class="Bound">lt</a>
</pre><p>The proof is by induction on the semantics of <code>M</code>. The two interesting cases are for variables and lambda abstractions.</p><ul><li><p>For a variable <code>x</code>, we have that <code>v = γ x</code> and we need to show that <code>δ ⊢ σ x ↓ v</code>. From the premise applied to <code>x</code>, we have that <code>δ ⊢ σ x ↓ γ x</code> aka <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>For a lambda abstraction, we must extend the substitution for the induction hypothesis. We apply the <code>subst-ext</code> lemma to show that the extended substitution maps variables to terms that result in the appropriate values.</p></li></ul><h3 id="single-substitution-preserves-denotations">Single substitution preserves denotations</h3><p>For β reduction, <code>(ƛ N) · M —→ N [ M ]</code>, we need to show that the semantics is preserved when substituting <code>M</code> for de Bruijn index 0 in term <code>N</code>. By inversion on the rules <code>↦-elim</code> and <code>↦-intro</code>, we have that <code>γ , v ⊢ M ↓ w</code> and <code>γ ⊢ N ↓ v</code>. So we need to show that <code>γ ⊢ M [ N ] ↓ w</code>, or equivalently, that <code>γ ⊢ subst (subst-zero N) M ↓ w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-5608" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-5621" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5623" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5625" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5626" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5627" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5629" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5630" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5632" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5634" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5638" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5639" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5641" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5642" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5644" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5646" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5648" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5649" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-5654" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5656" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5658" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5661" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5663" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5665" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5667" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5669" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-5674" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5676" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5678" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5680" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5682" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5684" href="../Soundness/#plfa_plfa-part3-Soundness-5646" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-5691" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-5710" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5712" href="../Soundness/#plfa_plfa-part3-Soundness-5630" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5714" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5716" href="../Soundness/#plfa_plfa-part3-Soundness-5642" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5718" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-5720" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5722" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-5724" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5726" href="../Soundness/#plfa_plfa-part3-Soundness-5648" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-5728" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-5740" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5741" href="../Soundness/#plfa_plfa-part3-Soundness-5741" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5742" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5744" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-5745" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5747" href="../Soundness/#plfa_plfa-part3-Soundness-5747" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-5748" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5750" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5751" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5753" href="../Soundness/#plfa_plfa-part3-Soundness-5753" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5754" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5756" href="../Soundness/#plfa_plfa-part3-Soundness-5756" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5757" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5759" href="../Soundness/#plfa_plfa-part3-Soundness-5759" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-5762" href="../Soundness/#plfa_plfa-part3-Soundness-5762" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-5765" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-4155" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5780" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5781" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5792" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5793" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5795" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5804" href="../Soundness/#plfa_plfa-part3-Soundness-5759" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-5809" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-5817" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5826" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5828" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5830" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5833" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5844" href="../Soundness/#plfa_plfa-part3-Soundness-5750" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5846" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5848" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5849" href="../Soundness/#plfa_plfa-part3-Soundness-5744" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5851" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5854" href="../Soundness/#plfa_plfa-part3-Soundness-5753" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5855" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5859" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5868" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-5870" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5872" href="../Soundness/#plfa_plfa-part3-Soundness-5762" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-5877" href="../Soundness/#plfa_plfa-part3-Soundness-5817" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5887" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-5889" href="../Soundness/#plfa_plfa-part3-Soundness-5889" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5890" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5892" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5894" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
</pre><p>This result is a corollary of the lemma for simultaneous substitution. To use the lemma, we just need to show that <code>subst-zero M</code> maps variables to terms that produces the same values as those in <code>γ , v</code>. Let <code>y</code> be an arbitrary variable (de Bruijn index).</p><ul><li><p>If it is <code>Z</code>, then <code>(subst-zero M) y = M</code> and <code>(γ , v) y = v</code>. By the premise we conclude that <code>γ ⊢ M ↓ v</code>.</p></li><li><p>If it is <code>S x</code>, then <code>(subst-zero M) (S x) = x</code> and <code>(γ , v) (S x) = γ x</code>. So we conclude that <code>γ ⊢ x ↓ γ x</code> by rule <code>var</code>.</p></li></ul><h3 id="reduction-preserves-denotations">Reduction preserves denotations</h3><p>With the substitution lemma in hand, it is straightforward to prove that reduction preserves denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-6559" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6568" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6570" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-6572" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6573" href="../Soundness/#plfa_plfa-part3-Soundness-6573" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6574" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6576" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6577" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6579" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6581" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-6585" href="../Soundness/#plfa_plfa-part3-Soundness-6573" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6586" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6588" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6589" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6591" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6593" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-6594" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-6598" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6600" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6602" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6604" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6606" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6608" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-6612" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6614" href="../Soundness/#plfa_plfa-part3-Soundness-6589" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6616" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-6619" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-6625" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-6638" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6640" href="../Soundness/#plfa_plfa-part3-Soundness-6577" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6642" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6644" href="../Soundness/#plfa_plfa-part3-Soundness-6591" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6646" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6648" href="../Soundness/#plfa_plfa-part3-Soundness-6593" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-6650" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6659" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6660" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-6663" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6665" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-6668" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6677" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6678" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6685" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6688" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6690" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6692" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6693" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-6696" href="../Soundness/#plfa_plfa-part3-Soundness-6696" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6697" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6699" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6701" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6708" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6709" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6718" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6721" href="../Soundness/#plfa_plfa-part3-Soundness-6696" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6722" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6724" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6727" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6736" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6737" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6744" href="../Soundness/#plfa_plfa-part3-Soundness-6744" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6747" href="../Soundness/#plfa_plfa-part3-Soundness-6747" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6749" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6751" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6752" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-6755" href="../Soundness/#plfa_plfa-part3-Soundness-6755" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6756" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6758" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6760" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6767" href="../Soundness/#plfa_plfa-part3-Soundness-6744" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6770" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6771" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6780" href="../Soundness/#plfa_plfa-part3-Soundness-6747" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-6783" href="../Soundness/#plfa_plfa-part3-Soundness-6755" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6784" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6786" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6795" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6796" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6803" href="../Soundness/#plfa_plfa-part3-Soundness-6803" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6806" href="../Soundness/#plfa_plfa-part3-Soundness-6806" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6808" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6810" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-6812" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6814" href="../Soundness/#plfa_plfa-part3-Soundness-5608" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-6827" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6828" href="../Compositional/#plfa_plfa-part3-Compositional-3618" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-6845" href="../Soundness/#plfa_plfa-part3-Soundness-6803" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6847" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6849" href="../Soundness/#plfa_plfa-part3-Soundness-6806" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6852" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6862" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6870" href="../Soundness/#plfa_plfa-part3-Soundness-6870" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-6871" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6873" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6874" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-6876" href="../Soundness/#plfa_plfa-part3-Soundness-6876" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6877" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6879" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6881" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6889" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6890" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6899" href="../Soundness/#plfa_plfa-part3-Soundness-6870" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6901" href="../Soundness/#plfa_plfa-part3-Soundness-6876" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6902" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6904" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6913" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-6921" href="../Soundness/#plfa_plfa-part3-Soundness-6921" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6923" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6925" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-6933" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6942" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6943" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6951" href="../Soundness/#plfa_plfa-part3-Soundness-6951" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6953" href="../Soundness/#plfa_plfa-part3-Soundness-6953" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6955" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6957" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6959" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6961" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6969" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6970" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6979" href="../Soundness/#plfa_plfa-part3-Soundness-6951" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6981" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6982" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6984" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6985" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6994" href="../Soundness/#plfa_plfa-part3-Soundness-6953" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6997" href="../Soundness/#plfa_plfa-part3-Soundness-6957" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6998" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-7000" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7009" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7010" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7014" href="../Soundness/#plfa_plfa-part3-Soundness-7014" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7016" href="../Soundness/#plfa_plfa-part3-Soundness-7016" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-7018" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7020" href="../Soundness/#plfa_plfa-part3-Soundness-7020" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-7022" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7024" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7029" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7038" href="../Soundness/#plfa_plfa-part3-Soundness-7014" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7040" href="../Soundness/#plfa_plfa-part3-Soundness-7020" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-7041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7043" href="../Soundness/#plfa_plfa-part3-Soundness-7016" class="Bound">lt</a>
</pre><p>We proceed by induction on the semantics of <code>M</code> with case analysis on the reduction.</p><ul><li><p>If <code>M</code> is a variable, then there is no such reduction.</p></li><li><p>If <code>M</code> is an application, then the reduction is either a congruence (ξ₁ or ξ₂) or β. For each congruence, we use the induction hypothesis. For β reduction we use the substitution lemma and the <code>sub</code> rule.</p></li><li><p>The rest of the cases are straightforward.</p></li></ul><h2 id="reduction-reflects-denotations">Reduction reflects denotations</h2><p>This section proves that reduction reflects the denotation of a term. That is, if <code>N</code> results in <code>v</code>, and if <code>M</code> reduces to <code>N</code>, then <code>M</code> also results in <code>v</code>. While there are some broad similarities between this proof and the above proof of semantic preservation, we shall require a few more technical lemmas to obtain this result.</p><p>The main challenge is dealing with the substitution in β reduction:</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>We have that <code>γ ⊢ N [ M ] ↓ v</code> and need to show that <code>γ ⊢ (ƛ N) · M ↓ v</code>. Now consider the derivation of <code>γ ⊢ N [ M ] ↓ v</code>. The term <code>M</code> may occur 0, 1, or many times inside <code>N [ M ]</code>. At each of those occurrences, <code>M</code> may result in a different value. But to build a derivation for <code>(ƛ N) · M</code>, we need a single value for <code>M</code>. If <code>M</code> occurred more than 1 time, then we can join all of the different values using <code>⊔</code>. If <code>M</code> occurred 0 times, then we do not need any information about <code>M</code> and can therefore use <code>⊥</code> for the value of <code>M</code>.</p><h3 id="renaming-reflects-meaning">Renaming reflects meaning</h3><p>Previously we showed that renaming variables preserves meaning. Now we prove the opposite, that it reflects meaning. That is, if <code>δ ⊢ rename ρ M ↓ v</code>, then <code>γ ⊢ M ↓ v</code>, where <code>(δ ∘ ρ) `⊑ γ</code>.</p>First, we need a variant of a lemma given earlier.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-8742" href="../Soundness/#plfa_plfa-part3-Soundness-8742" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8749" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8751" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8753" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8754" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8756" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-8758" href="../Soundness/#plfa_plfa-part3-Soundness-8758" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8759" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8761" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8762" href="../Soundness/#plfa_plfa-part3-Soundness-8762" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8764" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8766" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8770" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8771" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8773" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8774" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8776" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8778" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8782" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8783" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8787" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8789" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8790" href="../Soundness/#plfa_plfa-part3-Soundness-8790" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8792" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8794" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-8801" href="../Soundness/#plfa_plfa-part3-Soundness-8754" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8803" href="../Soundness/#plfa_plfa-part3-Soundness-8756" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8804" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-8808" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8810" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8811" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8813" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8815" href="../Soundness/#plfa_plfa-part3-Soundness-8790" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8816" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8818" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8821" href="../Soundness/#plfa_plfa-part3-Soundness-8762" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-8827" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-8860" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8862" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-8864" href="../Soundness/#plfa_plfa-part3-Soundness-8774" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8866" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8869" href="../Soundness/#plfa_plfa-part3-Soundness-8758" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8870" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8872" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8874" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-8878" href="../Soundness/#plfa_plfa-part3-Soundness-8790" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8879" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8881" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8884" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8885" href="../Soundness/#plfa_plfa-part3-Soundness-8762" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8887" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8890" href="../Soundness/#plfa_plfa-part3-Soundness-8758" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8891" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8893" href="../Soundness/#plfa_plfa-part3-Soundness-8742" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8900" href="../Soundness/#plfa_plfa-part3-Soundness-8900" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8902" href="../Soundness/#plfa_plfa-part3-Soundness-8902" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8905" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-8907" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8909" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-8916" href="../Soundness/#plfa_plfa-part3-Soundness-8742" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8923" href="../Soundness/#plfa_plfa-part3-Soundness-8923" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8925" href="../Soundness/#plfa_plfa-part3-Soundness-8925" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8928" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8929" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-8931" href="../Soundness/#plfa_plfa-part3-Soundness-8931" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-8932" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8934" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8936" href="../Soundness/#plfa_plfa-part3-Soundness-8925" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8939" href="../Soundness/#plfa_plfa-part3-Soundness-8931" class="Bound">x</a>
</pre>The proof is then as follows.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-8984" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-8999" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9001" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-9003" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9004" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9006" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-9008" href="../Soundness/#plfa_plfa-part3-Soundness-9008" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-9009" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9011" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9012" href="../Soundness/#plfa_plfa-part3-Soundness-9012" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9014" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9016" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9020" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-9021" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9023" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9024" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9026" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9028" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9032" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9033" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9035" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-9037" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9039" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9041" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9043" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9045" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-9046" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9050" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9052" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9053" href="../Soundness/#plfa_plfa-part3-Soundness-9053" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9055" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9057" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-9064" href="../Soundness/#plfa_plfa-part3-Soundness-9004" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9066" href="../Soundness/#plfa_plfa-part3-Soundness-9006" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9067" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9071" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9073" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9074" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9076" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-9078" href="../Soundness/#plfa_plfa-part3-Soundness-9053" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9079" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9081" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-9084" href="../Soundness/#plfa_plfa-part3-Soundness-9012" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-9088" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9090" href="../Soundness/#plfa_plfa-part3-Soundness-9024" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9092" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9094" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-9101" href="../Soundness/#plfa_plfa-part3-Soundness-9053" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9103" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9105" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9107" href="../Soundness/#plfa_plfa-part3-Soundness-9008" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-9113" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-9152" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9154" href="../Soundness/#plfa_plfa-part3-Soundness-9012" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9156" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9158" href="../Soundness/#plfa_plfa-part3-Soundness-9037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9160" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9162" href="../Soundness/#plfa_plfa-part3-Soundness-9008" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-9164" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9179" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9180" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9182" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9184" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-9186" href="../Soundness/#plfa_plfa-part3-Soundness-9186" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9187" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9189" href="../Soundness/#plfa_plfa-part3-Soundness-9189" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9195" href="../Soundness/#plfa_plfa-part3-Soundness-9195" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9197" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-9202" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-9210" href="../Soundness/#plfa_plfa-part3-Soundness-9195" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-9212" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-9216" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-9218" href="../Soundness/#plfa_plfa-part3-Soundness-9218" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9221" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-9224" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9228" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-9232" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9233" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-9241" href="../Soundness/#plfa_plfa-part3-Soundness-9218" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9244" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9245" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9251" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9252" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-9255" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9270" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9271" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9273" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9275" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9277" href="../Soundness/#plfa_plfa-part3-Soundness-9277" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9278" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-9280" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-9282" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9284" href="../Soundness/#plfa_plfa-part3-Soundness-9284" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9285" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9287" href="../Soundness/#plfa_plfa-part3-Soundness-9287" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9293" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9294" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9302" href="../Soundness/#plfa_plfa-part3-Soundness-9302" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9303" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9305" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9310" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9318" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9319" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9334" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9335" href="../Soundness/#plfa_plfa-part3-Soundness-8742" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-9342" href="../Soundness/#plfa_plfa-part3-Soundness-9284" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9344" href="../Soundness/#plfa_plfa-part3-Soundness-9287" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-9349" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9351" href="../Soundness/#plfa_plfa-part3-Soundness-9302" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9352" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9354" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9369" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9370" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9372" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9374" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9376" href="../Soundness/#plfa_plfa-part3-Soundness-9376" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9377" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9379" href="../Soundness/#plfa_plfa-part3-Soundness-9379" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9385" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9393" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9395" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9403" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9418" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9419" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9421" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9423" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9425" href="../Soundness/#plfa_plfa-part3-Soundness-9425" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9426" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9428" href="../Soundness/#plfa_plfa-part3-Soundness-9428" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9434" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9435" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9443" href="../Soundness/#plfa_plfa-part3-Soundness-9443" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9446" href="../Soundness/#plfa_plfa-part3-Soundness-9446" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9448" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9450" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9455" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9463" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9464" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9479" href="../Soundness/#plfa_plfa-part3-Soundness-9428" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9485" href="../Soundness/#plfa_plfa-part3-Soundness-9443" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9487" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9489" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9490" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9505" href="../Soundness/#plfa_plfa-part3-Soundness-9428" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9511" href="../Soundness/#plfa_plfa-part3-Soundness-9446" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9513" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9515" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9530" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9531" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9533" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9535" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9537" href="../Soundness/#plfa_plfa-part3-Soundness-9537" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9538" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9540" href="../Soundness/#plfa_plfa-part3-Soundness-9540" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9546" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9547" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9551" href="../Soundness/#plfa_plfa-part3-Soundness-9551" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9554" href="../Soundness/#plfa_plfa-part3-Soundness-9554" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9556" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9558" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9563" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9567" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9568" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9583" href="../Soundness/#plfa_plfa-part3-Soundness-9540" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9589" href="../Soundness/#plfa_plfa-part3-Soundness-9551" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9591" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9593" href="../Soundness/#plfa_plfa-part3-Soundness-9554" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-9596" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9611" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9612" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9614" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9616" href="../Soundness/#plfa_plfa-part3-Soundness-9616" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9618" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9620" href="../Soundness/#plfa_plfa-part3-Soundness-9620" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9621" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9623" href="../Soundness/#plfa_plfa-part3-Soundness-9623" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9629" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9630" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9637" href="../Soundness/#plfa_plfa-part3-Soundness-9637" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9640" href="../Soundness/#plfa_plfa-part3-Soundness-9640" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9642" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9644" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9649" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9656" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9657" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9672" href="../Soundness/#plfa_plfa-part3-Soundness-9623" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9678" href="../Soundness/#plfa_plfa-part3-Soundness-9637" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9680" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9682" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9683" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9698" href="../Soundness/#plfa_plfa-part3-Soundness-9623" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9704" href="../Soundness/#plfa_plfa-part3-Soundness-9640" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9706" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9708" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9723" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9724" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9726" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9728" href="../Soundness/#plfa_plfa-part3-Soundness-9728" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9730" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9732" href="../Soundness/#plfa_plfa-part3-Soundness-9732" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9733" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9735" href="../Soundness/#plfa_plfa-part3-Soundness-9735" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9741" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9749" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9751" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9759" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9774" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9775" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9777" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9779" href="../Soundness/#plfa_plfa-part3-Soundness-9779" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9781" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9783" href="../Soundness/#plfa_plfa-part3-Soundness-9783" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9784" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9786" href="../Soundness/#plfa_plfa-part3-Soundness-9786" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9792" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9793" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9801" href="../Soundness/#plfa_plfa-part3-Soundness-9801" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9804" href="../Soundness/#plfa_plfa-part3-Soundness-9804" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9806" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9808" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9813" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9821" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9822" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9837" href="../Soundness/#plfa_plfa-part3-Soundness-9786" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9843" href="../Soundness/#plfa_plfa-part3-Soundness-9801" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9845" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9847" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9848" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9863" href="../Soundness/#plfa_plfa-part3-Soundness-9786" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9869" href="../Soundness/#plfa_plfa-part3-Soundness-9804" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9871" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9873" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9888" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9889" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9891" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9893" href="../Soundness/#plfa_plfa-part3-Soundness-9893" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9895" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9897" href="../Soundness/#plfa_plfa-part3-Soundness-9897" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9898" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9900" href="../Soundness/#plfa_plfa-part3-Soundness-9900" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9906" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9907" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9911" href="../Soundness/#plfa_plfa-part3-Soundness-9911" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9914" href="../Soundness/#plfa_plfa-part3-Soundness-9914" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9916" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9918" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9923" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9927" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9928" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9943" href="../Soundness/#plfa_plfa-part3-Soundness-9900" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9949" href="../Soundness/#plfa_plfa-part3-Soundness-9911" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9951" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9953" href="../Soundness/#plfa_plfa-part3-Soundness-9914" class="Bound">lt</a>
</pre><p>We cannot prove this lemma by induction on the derivation of <code>δ ⊢ rename ρ M ↓ v</code>, so instead we proceed by induction on <code>M</code>.</p><ul><li><p>If it is a variable, we apply the inversion lemma to obtain that <code>v ⊑ δ (ρ x)</code>. Instantiating the premise to <code>x</code> we have <code>δ (ρ x) ⊑ γ x</code>, so we conclude by the <code>var</code> rule.</p></li><li><p>If it is a lambda abstraction <code>ƛ N</code>, we have rename <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>. We proceed by cases on <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code>.</p><ul><li><p>Rule <code>↦-intro</code>: To satisfy the premise of the induction hypothesis, we prove that the renaming can be extended to be a mapping from <code>γ , v</code> to <code>δ , v</code>.</p></li><li><p>Rule <code>⊥-intro</code>: We simply apply <code>⊥-intro</code>.</p></li><li><p>Rule <code>⊔-intro</code>: We apply the induction hypotheses and <code>⊔-intro</code>.</p></li><li><p>Rule <code>sub</code>: We apply the induction hypothesis and <code>sub</code>.</p></li></ul></li><li><p>If it is an application <code>L · M</code>, we have <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>. We proceed by cases on <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> and all the cases are straightforward.</p></li></ul><p>In the upcoming uses of <code>rename-reflect</code>, the renaming will always be the increment function. So we prove a corollary for that special case.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-11110" href="../Soundness/#plfa_plfa-part3-Soundness-11110" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11129" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11131" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11133" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11134" href="../Soundness/#plfa_plfa-part3-Soundness-11134" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11136" href="../Soundness/#plfa_plfa-part3-Soundness-11136" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-11139" href="../Soundness/#plfa_plfa-part3-Soundness-11139" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11140" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11142" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11143" href="../Soundness/#plfa_plfa-part3-Soundness-11143" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11145" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11147" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11151" href="../Soundness/#plfa_plfa-part3-Soundness-11134" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11152" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11154" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11156" href="../Soundness/#plfa_plfa-part3-Soundness-11156" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11158" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11160" href="../Soundness/#plfa_plfa-part3-Soundness-11134" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11162" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11164" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11165" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11169" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11171" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11172" href="../Soundness/#plfa_plfa-part3-Soundness-11143" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11174" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11177" href="../Soundness/#plfa_plfa-part3-Soundness-11136" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-11179" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11181" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11183" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11190" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-11193" href="../Soundness/#plfa_plfa-part3-Soundness-11156" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11195" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11197" href="../Soundness/#plfa_plfa-part3-Soundness-11139" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-11203" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11234" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11236" href="../Soundness/#plfa_plfa-part3-Soundness-11143" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11238" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11240" href="../Soundness/#plfa_plfa-part3-Soundness-11156" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11242" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11244" href="../Soundness/#plfa_plfa-part3-Soundness-11139" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-11246" href="../Soundness/#plfa_plfa-part3-Soundness-11110" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11265" href="../Soundness/#plfa_plfa-part3-Soundness-11265" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-11267" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11269" href="../Soundness/#plfa_plfa-part3-Soundness-8984" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11284" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-11292" href="../Soundness/#plfa_plfa-part3-Soundness-11265" class="Bound">d</a>
</pre><h3 id="substitution-reflects-denotations-the-variable-case">Substitution reflects denotations, the variable case</h3><p>We are almost ready to begin proving that simultaneous substitution reflects denotations. That is, if <code>γ ⊢ (subst σ M) ↓ v</code>, then <code>γ ⊢ σ k ↓ δ k</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code> and some <code>δ</code>. We shall start with the case in which <code>M</code> is a variable <code>x</code>. So instead the premise is <code>γ ⊢ σ x ↓ v</code> and we need to show that <code>δ ⊢ ` x ↓ v</code> for some <code>δ</code>. The <code>δ</code> that we choose shall be the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>.</p><p>Next we define the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>, that is <code>const-env x v</code>. To tell variables apart, we define the following function for deciding equality of variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-12020" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-12027" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12029" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12031" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12032" href="../Soundness/#plfa_plfa-part3-Soundness-12032" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12033" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12035" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12037" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12038" href="../Soundness/#plfa_plfa-part3-Soundness-12038" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12040" href="../Soundness/#plfa_plfa-part3-Soundness-12040" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12042" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12044" href="../Soundness/#plfa_plfa-part3-Soundness-12032" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12046" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12048" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12049" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12051" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12053" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1520" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-12057" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12058" href="../Soundness/#plfa_plfa-part3-Soundness-12038" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12060" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12062" href="../Soundness/#plfa_plfa-part3-Soundness-12040" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12063" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12065" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12067" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12072" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12075" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12078" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12082" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12087" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12089" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12094" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12095" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12097" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-12101" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12104" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12107" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12111" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12112" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12114" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-12117" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12122" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12125" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12128" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12131" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12135" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12136" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12138" href="../Soundness/#plfa_plfa-part3-Soundness-12138" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12139" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12141" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12146" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12147" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12149" href="../Soundness/#plfa_plfa-part3-Soundness-12149" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12150" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12152" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-12158" href="../Soundness/#plfa_plfa-part3-Soundness-12138" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12160" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12165" href="../Soundness/#plfa_plfa-part3-Soundness-12149" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12167" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12187" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12190" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12194" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12199" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12202" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12206" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12211" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12231" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12234" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12237" href="../Soundness/#plfa_plfa-part3-Soundness-12237" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-12243" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12246" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12249" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-12251" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12256" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12258" href="../Soundness/#plfa_plfa-part3-Soundness-12237" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12262" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-12266" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-12269" href="../Soundness/#plfa_plfa-part3-Soundness-12269" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12279" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12281" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12283" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12284" href="../Soundness/#plfa_plfa-part3-Soundness-12284" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12285" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12287" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12288" href="../Soundness/#plfa_plfa-part3-Soundness-12288" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12290" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12292" href="../Soundness/#plfa_plfa-part3-Soundness-12284" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12294" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12296" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12297" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12299" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12301" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12302" href="../Soundness/#plfa_plfa-part3-Soundness-12288" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12304" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12309" href="../Soundness/#plfa_plfa-part3-Soundness-12288" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12310" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12312" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12314" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12318" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12323" href="../Soundness/#plfa_plfa-part3-Soundness-12269" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12333" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12335" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12337" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12342" href="../Soundness/#plfa_plfa-part3-Soundness-12269" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12352" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12353" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12355" href="../Soundness/#plfa_plfa-part3-Soundness-12355" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12356" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12358" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12366" href="../Soundness/#plfa_plfa-part3-Soundness-12269" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12376" href="../Soundness/#plfa_plfa-part3-Soundness-12355" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12378" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12380" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>Now we use <code>var≟</code> to define <code>const-env</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-12440" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12450" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12452" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12454" href="../Soundness/#plfa_plfa-part3-Soundness-12454" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12455" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12457" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12459" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12460" href="../Soundness/#plfa_plfa-part3-Soundness-12460" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12462" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12464" href="../Soundness/#plfa_plfa-part3-Soundness-12454" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12466" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12468" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12469" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12471" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12473" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-12479" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12481" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-12485" href="../Soundness/#plfa_plfa-part3-Soundness-12454" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-12487" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12497" href="../Soundness/#plfa_plfa-part3-Soundness-12497" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12499" href="../Soundness/#plfa_plfa-part3-Soundness-12499" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12501" href="../Soundness/#plfa_plfa-part3-Soundness-12501" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12503" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12508" href="../Soundness/#plfa_plfa-part3-Soundness-12497" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12510" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12515" href="../Soundness/#plfa_plfa-part3-Soundness-12501" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12517" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12533" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12535" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12539" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-12547" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12549" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12551" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12567" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12569" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12572" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-12581" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12583" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
</pre><p>Of course, <code>const-env x v</code> maps <code>x</code> to value <code>v</code></p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-12648" href="../Soundness/#plfa_plfa-part3-Soundness-12648" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12663" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12665" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12667" href="../Soundness/#plfa_plfa-part3-Soundness-12667" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12668" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12670" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12671" href="../Soundness/#plfa_plfa-part3-Soundness-12671" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12673" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12675" href="../Soundness/#plfa_plfa-part3-Soundness-12667" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12677" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12679" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12680" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12682" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12683" href="../Soundness/#plfa_plfa-part3-Soundness-12683" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12684" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12686" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12688" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12689" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12699" href="../Soundness/#plfa_plfa-part3-Soundness-12671" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12701" href="../Soundness/#plfa_plfa-part3-Soundness-12683" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12702" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12704" href="../Soundness/#plfa_plfa-part3-Soundness-12671" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12706" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12708" href="../Soundness/#plfa_plfa-part3-Soundness-12683" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12710" href="../Soundness/#plfa_plfa-part3-Soundness-12648" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12725" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12726" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-12728" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12730" href="../Soundness/#plfa_plfa-part3-Soundness-12730" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12731" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12733" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12741" href="../Soundness/#plfa_plfa-part3-Soundness-12269" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12751" href="../Soundness/#plfa_plfa-part3-Soundness-12730" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12753" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12755" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>and <code>const-env x v</code> maps <code>y</code> to <code>⊥</code>, so long as <code>x ≢ y</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-12831" href="../Soundness/#plfa_plfa-part3-Soundness-12831" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12846" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12848" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12850" href="../Soundness/#plfa_plfa-part3-Soundness-12850" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12851" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12853" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12854" href="../Soundness/#plfa_plfa-part3-Soundness-12854" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12856" href="../Soundness/#plfa_plfa-part3-Soundness-12856" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12858" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12860" href="../Soundness/#plfa_plfa-part3-Soundness-12850" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12862" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12864" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12865" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12867" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12868" href="../Soundness/#plfa_plfa-part3-Soundness-12868" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12869" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-12873" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12875" href="../Soundness/#plfa_plfa-part3-Soundness-12854" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12877" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-12879" href="../Soundness/#plfa_plfa-part3-Soundness-12856" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-12885" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-12907" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12909" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12919" href="../Soundness/#plfa_plfa-part3-Soundness-12854" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12921" href="../Soundness/#plfa_plfa-part3-Soundness-12868" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12923" href="../Soundness/#plfa_plfa-part3-Soundness-12856" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12925" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12927" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-12929" href="../Soundness/#plfa_plfa-part3-Soundness-12831" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12944" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12945" href="../Soundness/#plfa_plfa-part3-Soundness-12945" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12946" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12948" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12949" href="../Soundness/#plfa_plfa-part3-Soundness-12949" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12950" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12952" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12953" href="../Soundness/#plfa_plfa-part3-Soundness-12953" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12954" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12956" href="../Soundness/#plfa_plfa-part3-Soundness-12956" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12960" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12965" href="../Soundness/#plfa_plfa-part3-Soundness-12949" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12967" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12972" href="../Soundness/#plfa_plfa-part3-Soundness-12953" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12974" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-12979" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12981" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12985" href="../Soundness/#plfa_plfa-part3-Soundness-12985" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-12989" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12992" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Empty.html#637" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-12999" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13000" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-13004" href="../Soundness/#plfa_plfa-part3-Soundness-12985" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-13006" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-13008" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-13013" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-13015" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-13018" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-13023" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-13026" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>So we choose <code>const-env x v</code> for <code>δ</code> and obtain <code>δ ⊢ ` x ↓ v</code> with the <code>var</code> rule.</p><p>It remains to prove that <code>γ `⊢ σ ↓ δ</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code>, given that we have chosen <code>const-env x v</code> for <code>δ</code>. We shall have two cases to consider, <code>x ≡ y</code> or <code>x ≢ y</code>.</p><p>Now to finish the two cases of the proof.</p><ul><li>In the case where <code>x ≡ y</code>, we need to show that <code>γ ⊢ σ y ↓ v</code>, but that’s just our premise.</li><li>In the case where <code>x ≢ y</code>, we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>Thus, we have completed the variable case of the proof that simultaneous substitution reflects denotations. Here is the proof again, formally.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-13697" href="../Soundness/#plfa_plfa-part3-Soundness-13697" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13715" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13717" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-13719" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13720" href="../Soundness/#plfa_plfa-part3-Soundness-13720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13722" href="../Soundness/#plfa_plfa-part3-Soundness-13722" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13723" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13725" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13726" href="../Soundness/#plfa_plfa-part3-Soundness-13726" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13728" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13730" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13734" href="../Soundness/#plfa_plfa-part3-Soundness-13722" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13735" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13737" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13738" href="../Soundness/#plfa_plfa-part3-Soundness-13738" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13740" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13742" href="../Soundness/#plfa_plfa-part3-Soundness-13720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13744" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-13746" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-13747" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13749" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13750" href="../Soundness/#plfa_plfa-part3-Soundness-13750" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13751" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13753" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13754" href="../Soundness/#plfa_plfa-part3-Soundness-13754" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13756" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13758" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-13764" href="../Soundness/#plfa_plfa-part3-Soundness-13720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13766" href="../Soundness/#plfa_plfa-part3-Soundness-13722" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13767" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-13771" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13773" href="../Soundness/#plfa_plfa-part3-Soundness-13726" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13775" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13777" href="../Soundness/#plfa_plfa-part3-Soundness-13754" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13779" href="../Soundness/#plfa_plfa-part3-Soundness-13738" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13781" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13783" href="../Soundness/#plfa_plfa-part3-Soundness-13750" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-13789" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-13833" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13835" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-13838" href="../Soundness/#plfa_plfa-part3-Soundness-13838" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13840" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-13842" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13846" href="../Soundness/#plfa_plfa-part3-Soundness-13720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13848" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-13850" href="../Soundness/#plfa_plfa-part3-Soundness-13726" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13852" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-13855" href="../Soundness/#plfa_plfa-part3-Soundness-13754" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13857" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13859" href="../Soundness/#plfa_plfa-part3-Soundness-13838" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-13862" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-13865" href="../Soundness/#plfa_plfa-part3-Soundness-13838" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13867" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13869" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-13871" href="../Soundness/#plfa_plfa-part3-Soundness-13738" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13873" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13875" href="../Soundness/#plfa_plfa-part3-Soundness-13750" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-13877" href="../Soundness/#plfa_plfa-part3-Soundness-13697" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13895" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13896" href="../Soundness/#plfa_plfa-part3-Soundness-13896" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13897" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13899" href="../Soundness/#plfa_plfa-part3-Soundness-13899" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13900" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13902" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-13903" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13905" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13906" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13908" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13909" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13911" href="../Soundness/#plfa_plfa-part3-Soundness-13911" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-13912" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13914" href="../Soundness/#plfa_plfa-part3-Soundness-13914" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-13919" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-13927" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-13931" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13932" href="../Soundness/#plfa_plfa-part3-Soundness-12648" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-13947" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13948" href="../Soundness/#plfa_plfa-part3-Soundness-13896" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13949" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13951" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13952" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13954" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13955" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-13958" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-13964" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13966" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-13976" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13978" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-13980" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13982" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13984" href="../Soundness/#plfa_plfa-part3-Soundness-14017" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13997" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13999" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-14003" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-14005" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-14009" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-14017" href="../Soundness/#plfa_plfa-part3-Soundness-14017" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14030" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14032" href="../Soundness/#plfa_plfa-part3-Soundness-13902" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14034" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14037" href="../Soundness/#plfa_plfa-part3-Soundness-13911" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14039" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14041" href="../Soundness/#plfa_plfa-part3-Soundness-12440" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-14051" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14053" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-14057" href="../Soundness/#plfa_plfa-part3-Soundness-14017" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14070" href="../Soundness/#plfa_plfa-part3-Soundness-14070" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-14072" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-14077" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14079" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-14084" href="../Soundness/#plfa_plfa-part3-Soundness-14070" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-14088" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14092" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14094" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-14098" href="../Soundness/#plfa_plfa-part3-Soundness-14098" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14102" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14110" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-14114" href="../Soundness/#plfa_plfa-part3-Soundness-14098" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14118" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14120" href="../Soundness/#plfa_plfa-part3-Soundness-12648" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-14135" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14136" href="../Soundness/#plfa_plfa-part3-Soundness-13896" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14137" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14139" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14140" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14142" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14143" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14145" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14147" href="../Soundness/#plfa_plfa-part3-Soundness-13914" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-14152" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14156" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14158" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-14161" href="../Soundness/#plfa_plfa-part3-Soundness-14161" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14165" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14173" href="../Soundness/#plfa_plfa-part3-Soundness-12831" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-14188" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14189" href="../Soundness/#plfa_plfa-part3-Soundness-13896" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14190" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14192" href="../Soundness/#plfa_plfa-part3-Soundness-13905" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14193" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14195" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-14196" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14198" href="../Soundness/#plfa_plfa-part3-Soundness-13908" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14199" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14201" href="../Soundness/#plfa_plfa-part3-Soundness-14161" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14205" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14207" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="substitutions-and-environment-construction">Substitutions and environment construction</h3><p>Every substitution produces terms that can evaluate to <code>⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-14338" href="../Soundness/#plfa_plfa-part3-Soundness-14338" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14346" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14348" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14350" href="../Soundness/#plfa_plfa-part3-Soundness-14350" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14352" href="../Soundness/#plfa_plfa-part3-Soundness-14352" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14353" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14355" href="../Soundness/#plfa_plfa-part3-Soundness-14355" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14357" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14359" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14363" href="../Soundness/#plfa_plfa-part3-Soundness-14352" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14364" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14366" href="../Soundness/#plfa_plfa-part3-Soundness-14366" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14368" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14370" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14376" href="../Soundness/#plfa_plfa-part3-Soundness-14350" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14378" href="../Soundness/#plfa_plfa-part3-Soundness-14352" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14379" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-14385" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-14405" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14407" href="../Soundness/#plfa_plfa-part3-Soundness-14355" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14409" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14412" href="../Soundness/#plfa_plfa-part3-Soundness-14366" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14414" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14416" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-14419" href="../Soundness/#plfa_plfa-part3-Soundness-14338" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14427" href="../Soundness/#plfa_plfa-part3-Soundness-14427" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14429" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14431" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><p>If a substitution produces terms that evaluate to the values in both <code>γ₁</code> and <code>γ₂</code>, then those terms also evaluate to the values in <code>γ₁ ⊔ γ₂</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-14596" href="../Soundness/#plfa_plfa-part3-Soundness-14596" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14604" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14606" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14608" href="../Soundness/#plfa_plfa-part3-Soundness-14608" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14610" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14611" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14613" href="../Soundness/#plfa_plfa-part3-Soundness-14613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14615" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14617" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14621" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14622" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14624" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14627" href="../Soundness/#plfa_plfa-part3-Soundness-14627" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-14630" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14632" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14636" href="../Soundness/#plfa_plfa-part3-Soundness-14608" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14637" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14639" href="../Soundness/#plfa_plfa-part3-Soundness-14639" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14641" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14643" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14649" href="../Soundness/#plfa_plfa-part3-Soundness-14608" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14651" href="../Soundness/#plfa_plfa-part3-Soundness-14610" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14652" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-14665" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14667" href="../Soundness/#plfa_plfa-part3-Soundness-14613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14669" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14672" href="../Soundness/#plfa_plfa-part3-Soundness-14639" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14674" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14676" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-14690" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14692" href="../Soundness/#plfa_plfa-part3-Soundness-14613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14694" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14697" href="../Soundness/#plfa_plfa-part3-Soundness-14639" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14699" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14701" href="../Soundness/#plfa_plfa-part3-Soundness-14627" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-14717" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-14754" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14756" href="../Soundness/#plfa_plfa-part3-Soundness-14613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14758" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14761" href="../Soundness/#plfa_plfa-part3-Soundness-14639" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14763" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14765" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14766" href="../Soundness/#plfa_plfa-part3-Soundness-14624" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14769" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-14772" href="../Soundness/#plfa_plfa-part3-Soundness-14627" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-14774" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-14776" href="../Soundness/#plfa_plfa-part3-Soundness-14596" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14784" href="../Soundness/#plfa_plfa-part3-Soundness-14784" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14790" href="../Soundness/#plfa_plfa-part3-Soundness-14790" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14796" href="../Soundness/#plfa_plfa-part3-Soundness-14796" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14798" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14800" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-14808" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14809" href="../Soundness/#plfa_plfa-part3-Soundness-14784" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14815" href="../Soundness/#plfa_plfa-part3-Soundness-14796" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14816" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14818" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14819" href="../Soundness/#plfa_plfa-part3-Soundness-14790" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14825" href="../Soundness/#plfa_plfa-part3-Soundness-14796" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14826" class="Symbol">)</a>
</pre><h3 id="the-lambda-constructor-is-injective">The Lambda constructor is injective</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-14882" href="../Soundness/#plfa_plfa-part3-Soundness-14882" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14893" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14895" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14897" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14898" href="../Soundness/#plfa_plfa-part3-Soundness-14898" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14899" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14901" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14902" href="../Soundness/#plfa_plfa-part3-Soundness-14902" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14904" href="../Soundness/#plfa_plfa-part3-Soundness-14904" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-14906" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14908" href="../Soundness/#plfa_plfa-part3-Soundness-14898" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14910" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-14912" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14914" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14916" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14918" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14922" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14924" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-14928" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14929" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-14931" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14933" href="../Soundness/#plfa_plfa-part3-Soundness-14898" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14935" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14937" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14938" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14940" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14941" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14943" href="../Soundness/#plfa_plfa-part3-Soundness-14902" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-14944" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14946" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14947" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14949" href="../Soundness/#plfa_plfa-part3-Soundness-14904" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-14950" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-14956" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14986" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14988" href="../Soundness/#plfa_plfa-part3-Soundness-14902" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14990" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-14992" href="../Soundness/#plfa_plfa-part3-Soundness-14904" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-14994" href="../Soundness/#plfa_plfa-part3-Soundness-14882" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-15005" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-15010" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15012" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h3 id="simultaneous-substitution-reflects-denotations">Simultaneous substitution reflects denotations</h3><p>In this section we prove a central lemma, that substitution reflects denotations. That is, if <code>γ ⊢ subst σ M ↓ v</code>, then <code>δ ⊢ M ↓ v</code> and <code>γ `⊢ σ ↓ δ</code> for some <code>δ</code>. We shall proceed by induction on the derivation of <code>γ ⊢ subst σ M ↓ v</code>. This requires a minor restatement of the lemma, changing the premise to <code>γ ⊢ L ↓ v</code> and <code>L ≡ subst σ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-15427" href="../Soundness/#plfa_plfa-part3-Soundness-15427" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15433" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15435" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15437" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15438" href="../Soundness/#plfa_plfa-part3-Soundness-15438" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15439" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15441" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15442" href="../Soundness/#plfa_plfa-part3-Soundness-15442" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15444" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15446" href="../Soundness/#plfa_plfa-part3-Soundness-15438" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15448" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15450" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-15452" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15454" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15455" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15457" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15458" href="../Soundness/#plfa_plfa-part3-Soundness-15458" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15460" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15462" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15466" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15467" href="../Soundness/#plfa_plfa-part3-Soundness-15438" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15469" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15471" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15472" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-15475" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15476" href="../Soundness/#plfa_plfa-part3-Soundness-15476" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15477" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15481" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15483" href="../Soundness/#plfa_plfa-part3-Soundness-15458" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15485" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15487" href="../Soundness/#plfa_plfa-part3-Soundness-15442" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15489" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15491" href="../Soundness/#plfa_plfa-part3-Soundness-15476" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-15497" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15526" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15528" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15529" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-15534" href="../Soundness/#plfa_plfa-part3-Soundness-15458" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15536" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-15539" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-15544" href="../Soundness/#plfa_plfa-part3-Soundness-15458" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15545" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15547" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15549" href="../Soundness/#plfa_plfa-part3-Soundness-15442" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15551" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15553" href="../Soundness/#plfa_plfa-part3-Soundness-15476" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-15555" href="../Soundness/#plfa_plfa-part3-Soundness-15427" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15561" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15562" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-15564" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15566" href="../Soundness/#plfa_plfa-part3-Soundness-15566" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15567" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15569" href="../Soundness/#plfa_plfa-part3-Soundness-15569" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-15573" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15581" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-15591" href="../Soundness/#plfa_plfa-part3-Soundness-15566" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15593" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15595" href="../Soundness/#plfa_plfa-part3-Soundness-15569" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-15600" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15614" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15616" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15618" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15619" href="../Soundness/#plfa_plfa-part3-Soundness-15619" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15621" href="../Soundness/#plfa_plfa-part3-Soundness-15621" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15622" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15624" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15625" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15627" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15629" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15633" href="../Soundness/#plfa_plfa-part3-Soundness-15621" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15634" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15636" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15637" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15639" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15641" href="../Soundness/#plfa_plfa-part3-Soundness-15619" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15643" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15645" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15646" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15648" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15649" href="../Soundness/#plfa_plfa-part3-Soundness-15649" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15650" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15652" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15653" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15655" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15657" href="../Soundness/#plfa_plfa-part3-Soundness-15621" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-15659" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15661" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15662" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15664" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15665" href="../Soundness/#plfa_plfa-part3-Soundness-15665" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15667" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15669" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-15675" href="../Soundness/#plfa_plfa-part3-Soundness-15619" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15677" href="../Soundness/#plfa_plfa-part3-Soundness-15621" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15678" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15682" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15684" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15686" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15688" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15690" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15692" href="../Soundness/#plfa_plfa-part3-Soundness-15649" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-15696" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15698" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-15704" href="../Soundness/#plfa_plfa-part3-Soundness-15665" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15706" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15708" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15710" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-15716" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15758" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15760" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-15763" href="../Soundness/#plfa_plfa-part3-Soundness-15763" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15765" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-15767" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15771" href="../Soundness/#plfa_plfa-part3-Soundness-15619" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15773" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-15775" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15777" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-15780" href="../Soundness/#plfa_plfa-part3-Soundness-15665" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15782" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15784" href="../Soundness/#plfa_plfa-part3-Soundness-15763" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-15787" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-15790" href="../Soundness/#plfa_plfa-part3-Soundness-15763" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15792" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15794" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15796" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15798" href="../Soundness/#plfa_plfa-part3-Soundness-15649" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-15801" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15815" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15816" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15818" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15820" href="../Soundness/#plfa_plfa-part3-Soundness-15820" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15821" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-15823" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15825" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15827" href="../Soundness/#plfa_plfa-part3-Soundness-15827" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15828" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15830" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15831" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15835" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15836" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15838" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15840" href="../Soundness/#plfa_plfa-part3-Soundness-15840" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15841" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15844" href="../Soundness/#plfa_plfa-part3-Soundness-15844" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15848" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15853" href="../Soundness/#plfa_plfa-part3-Soundness-15820" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-15855" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-15859" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15861" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-15863" href="../Soundness/#plfa_plfa-part3-Soundness-15863" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-15866" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15871" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15875" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15876" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15878" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15880" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15881" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-15883" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-15897" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15899" href="../Soundness/#plfa_plfa-part3-Soundness-15899" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-15903" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15911" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-15915" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15919" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15921" href="../Soundness/#plfa_plfa-part3-Soundness-13697" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-15939" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15940" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15942" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15944" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15945" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15947" href="../Soundness/#plfa_plfa-part3-Soundness-15899" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-15950" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15964" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15965" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15967" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15969" href="../Soundness/#plfa_plfa-part3-Soundness-15969" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15970" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15972" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15973" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15977" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15978" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15980" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15982" href="../Soundness/#plfa_plfa-part3-Soundness-15982" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15983" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15986" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-15989" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15991" href="../Soundness/#plfa_plfa-part3-Soundness-15991" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-15994" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-15996" href="../Soundness/#plfa_plfa-part3-Soundness-15996" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-15999" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16013" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16014" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16016" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16018" href="../Soundness/#plfa_plfa-part3-Soundness-16018" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16019" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16021" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16022" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-16026" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16027" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16029" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16031" href="../Soundness/#plfa_plfa-part3-Soundness-16031" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16032" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-16035" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16038" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16040" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16042" href="../Soundness/#plfa_plfa-part3-Soundness-16042" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-16046" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16060" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16061" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16063" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16065" href="../Soundness/#plfa_plfa-part3-Soundness-16065" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16066" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16068" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16070" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16072" href="../Soundness/#plfa_plfa-part3-Soundness-16072" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16073" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16075" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16076" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16083" href="../Soundness/#plfa_plfa-part3-Soundness-16083" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16086" href="../Soundness/#plfa_plfa-part3-Soundness-16086" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16088" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16090" href="../Soundness/#plfa_plfa-part3-Soundness-16090" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-16103" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16108" href="../Soundness/#plfa_plfa-part3-Soundness-16065" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16110" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16117" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16119" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16121" href="../Soundness/#plfa_plfa-part3-Soundness-16121" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16123" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16128" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16135" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16138" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-16141" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16148" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16150" href="../Soundness/#plfa_plfa-part3-Soundness-16150" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16153" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16161" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16165" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16169" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16171" href="../Soundness/#plfa_plfa-part3-Soundness-13697" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16189" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16190" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16192" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16194" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16195" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16197" href="../Soundness/#plfa_plfa-part3-Soundness-16150" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16200" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16214" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16215" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16222" href="../Soundness/#plfa_plfa-part3-Soundness-16222" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16225" href="../Soundness/#plfa_plfa-part3-Soundness-16225" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16227" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16229" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16232" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16234" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16236" href="../Soundness/#plfa_plfa-part3-Soundness-16236" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-16239" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-16252" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16253" href="../Soundness/#plfa_plfa-part3-Soundness-16253" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16254" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16256" href="../Soundness/#plfa_plfa-part3-Soundness-16256" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-16257" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16259" href="../Soundness/#plfa_plfa-part3-Soundness-16259" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-16260" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16262" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16264" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16266" href="../Soundness/#plfa_plfa-part3-Soundness-16266" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16267" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16269" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16270" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16277" href="../Soundness/#plfa_plfa-part3-Soundness-16277" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16280" href="../Soundness/#plfa_plfa-part3-Soundness-16280" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16282" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-16287" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16292" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16294" href="../Soundness/#plfa_plfa-part3-Soundness-16294" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-16297" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-16299" href="../Soundness/#plfa_plfa-part3-Soundness-16299" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-16307" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16312" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16326" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16327" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16329" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16331" href="../Soundness/#plfa_plfa-part3-Soundness-16294" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-16333" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16335" href="../Soundness/#plfa_plfa-part3-Soundness-16277" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16338" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16343" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16345" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16359" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16360" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16362" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16364" href="../Soundness/#plfa_plfa-part3-Soundness-16299" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-16366" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16368" href="../Soundness/#plfa_plfa-part3-Soundness-16280" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-16371" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16376" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-16384" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16386" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16388" href="../Soundness/#plfa_plfa-part3-Soundness-16388" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16391" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16393" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16395" href="../Soundness/#plfa_plfa-part3-Soundness-16395" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16404" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16406" href="../Soundness/#plfa_plfa-part3-Soundness-16406" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16409" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16411" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16413" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16415" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16417" href="../Soundness/#plfa_plfa-part3-Soundness-16417" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16420" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16422" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16424" href="../Soundness/#plfa_plfa-part3-Soundness-16424" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16433" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16435" href="../Soundness/#plfa_plfa-part3-Soundness-16435" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16438" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16440" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16442" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-16449" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16451" href="../Soundness/#plfa_plfa-part3-Soundness-16388" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16454" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-16457" href="../Soundness/#plfa_plfa-part3-Soundness-16417" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16460" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16462" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16464" href="../Soundness/#plfa_plfa-part3-Soundness-14596" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-16472" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16473" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-16476" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16478" href="../Soundness/#plfa_plfa-part3-Soundness-16388" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-16480" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16482" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-16485" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16487" href="../Soundness/#plfa_plfa-part3-Soundness-16417" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16489" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16491" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16493" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16495" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16496" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16498" href="../Soundness/#plfa_plfa-part3-Soundness-16395" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16507" href="../Soundness/#plfa_plfa-part3-Soundness-16424" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16516" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-16538" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16545" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16546" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16552" href="../Soundness/#plfa_plfa-part3-Soundness-16406" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16555" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16556" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-16570" href="../Soundness/#plfa_plfa-part3-Soundness-16388" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16573" href="../Soundness/#plfa_plfa-part3-Soundness-16417" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16575" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-16605" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16606" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16612" href="../Soundness/#plfa_plfa-part3-Soundness-16435" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16615" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16616" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-16630" href="../Soundness/#plfa_plfa-part3-Soundness-16388" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16633" href="../Soundness/#plfa_plfa-part3-Soundness-16417" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16635" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-16638" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16640" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-16643" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16657" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16658" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16660" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16662" href="../Soundness/#plfa_plfa-part3-Soundness-16662" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16663" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16665" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16667" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16669" href="../Soundness/#plfa_plfa-part3-Soundness-16669" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16670" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16672" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16673" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16681" href="../Soundness/#plfa_plfa-part3-Soundness-16681" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16682" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16684" href="../Soundness/#plfa_plfa-part3-Soundness-16684" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16688" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16693" href="../Soundness/#plfa_plfa-part3-Soundness-16662" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16695" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16702" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16704" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16706" href="../Soundness/#plfa_plfa-part3-Soundness-16706" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16708" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16713" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16714" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16722" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16723" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16725" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16741" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16743" href="../Soundness/#plfa_plfa-part3-Soundness-16743" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16746" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16754" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16758" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16762" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16764" href="../Soundness/#plfa_plfa-part3-Soundness-13697" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16782" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16783" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16785" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16787" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16788" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16790" href="../Soundness/#plfa_plfa-part3-Soundness-16743" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16793" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16807" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16808" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16810" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16812" href="../Soundness/#plfa_plfa-part3-Soundness-16812" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16813" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16815" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16816" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16824" href="../Soundness/#plfa_plfa-part3-Soundness-16824" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16825" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16827" href="../Soundness/#plfa_plfa-part3-Soundness-16827" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-16830" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16832" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16834" href="../Soundness/#plfa_plfa-part3-Soundness-16834" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-16843" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16848" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16862" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16863" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16865" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16867" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-16872" href="../Soundness/#plfa_plfa-part3-Soundness-16812" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16873" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16875" href="../Soundness/#plfa_plfa-part3-Soundness-16824" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-16877" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16878" href="../Soundness/#plfa_plfa-part3-Soundness-14882" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-16889" href="../Soundness/#plfa_plfa-part3-Soundness-16827" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-16891" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16893" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-16897" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16899" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16901" href="../Soundness/#plfa_plfa-part3-Soundness-16901" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16904" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16906" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16908" href="../Soundness/#plfa_plfa-part3-Soundness-16908" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16918" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16920" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-16923" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16925" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16927" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-16933" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16935" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-16940" href="../Soundness/#plfa_plfa-part3-Soundness-16901" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16943" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16945" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16947" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-16951" href="../Soundness/#plfa_plfa-part3-Soundness-16951" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16953" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16955" href="../Soundness/#plfa_plfa-part3-Soundness-11110" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-16974" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16975" href="../Soundness/#plfa_plfa-part3-Soundness-16908" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16985" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16986" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16988" href="../Soundness/#plfa_plfa-part3-Soundness-16951" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16989" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-16994" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-17009" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17017" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17018" href="../Denotational/#plfa_plfa-part3-Denotational-25555" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-17025" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17026" href="../Soundness/#plfa_plfa-part3-Soundness-15427" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-17032" href="../Soundness/#plfa_plfa-part3-Soundness-16920" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-17034" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17036" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17037" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-17045" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17046" href="../Soundness/#plfa_plfa-part3-Soundness-16908" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-17056" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-17057" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-17061" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17063" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17065" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17079" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17080" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17088" href="../Soundness/#plfa_plfa-part3-Soundness-17088" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-17089" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17091" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-17094" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17096" href="../Soundness/#plfa_plfa-part3-Soundness-17096" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-17099" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-17101" href="../Soundness/#plfa_plfa-part3-Soundness-17101" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-17105" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17119" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17120" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17122" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17124" href="../Soundness/#plfa_plfa-part3-Soundness-17124" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17125" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17127" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17135" href="../Soundness/#plfa_plfa-part3-Soundness-17135" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17138" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-17144" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17146" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-17149" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17151" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17153" href="../Soundness/#plfa_plfa-part3-Soundness-14338" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-17161" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17162" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17164" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17166" href="../Soundness/#plfa_plfa-part3-Soundness-17124" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17167" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17169" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17171" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17179" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17181" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-17184" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17198" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17199" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17201" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17203" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17204" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17206" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17207" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17215" href="../Soundness/#plfa_plfa-part3-Soundness-17215" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17218" href="../Soundness/#plfa_plfa-part3-Soundness-17218" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-17220" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17222" href="../Soundness/#plfa_plfa-part3-Soundness-17222" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-17227" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17232" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17246" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17247" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17249" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17251" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17252" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17254" href="../Soundness/#plfa_plfa-part3-Soundness-17215" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17257" href="../Soundness/#plfa_plfa-part3-Soundness-17222" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17260" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17262" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17276" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17277" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17279" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17281" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17282" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17284" href="../Soundness/#plfa_plfa-part3-Soundness-17218" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-17287" href="../Soundness/#plfa_plfa-part3-Soundness-17222" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17290" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17294" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17296" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17298" href="../Soundness/#plfa_plfa-part3-Soundness-17298" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17301" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17303" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17305" href="../Soundness/#plfa_plfa-part3-Soundness-17305" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17314" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17316" href="../Soundness/#plfa_plfa-part3-Soundness-17316" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17319" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17321" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17323" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17325" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17327" href="../Soundness/#plfa_plfa-part3-Soundness-17327" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17330" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17332" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17334" href="../Soundness/#plfa_plfa-part3-Soundness-17334" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17343" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17345" href="../Soundness/#plfa_plfa-part3-Soundness-17345" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17348" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17350" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17352" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-17359" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17361" href="../Soundness/#plfa_plfa-part3-Soundness-17298" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17364" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-17367" href="../Soundness/#plfa_plfa-part3-Soundness-17327" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17370" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17372" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17374" href="../Soundness/#plfa_plfa-part3-Soundness-14596" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-17382" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17383" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-17386" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17388" href="../Soundness/#plfa_plfa-part3-Soundness-17298" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-17390" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17392" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-17395" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17397" href="../Soundness/#plfa_plfa-part3-Soundness-17327" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17399" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17401" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17403" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17405" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17406" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17408" href="../Soundness/#plfa_plfa-part3-Soundness-17305" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17417" href="../Soundness/#plfa_plfa-part3-Soundness-17334" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17426" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-17448" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17456" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17457" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17463" href="../Soundness/#plfa_plfa-part3-Soundness-17316" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17466" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17467" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-17481" href="../Soundness/#plfa_plfa-part3-Soundness-17298" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17484" href="../Soundness/#plfa_plfa-part3-Soundness-17327" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17486" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-17517" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17518" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17524" href="../Soundness/#plfa_plfa-part3-Soundness-17345" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17527" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17528" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-17542" href="../Soundness/#plfa_plfa-part3-Soundness-17298" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17545" href="../Soundness/#plfa_plfa-part3-Soundness-17327" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17547" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-17550" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17552" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17554" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17569" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17573" href="../Soundness/#plfa_plfa-part3-Soundness-17573" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17575" href="../Soundness/#plfa_plfa-part3-Soundness-17575" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-17577" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17579" href="../Soundness/#plfa_plfa-part3-Soundness-17579" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-17586" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17591" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17605" href="../Soundness/#plfa_plfa-part3-Soundness-17573" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17607" href="../Soundness/#plfa_plfa-part3-Soundness-17579" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17610" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17614" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17616" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17618" href="../Soundness/#plfa_plfa-part3-Soundness-17618" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17620" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17622" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17624" href="../Soundness/#plfa_plfa-part3-Soundness-17624" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17632" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17634" href="../Soundness/#plfa_plfa-part3-Soundness-17634" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17636" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17638" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17640" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17642" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17644" href="../Soundness/#plfa_plfa-part3-Soundness-17618" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17646" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17648" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17650" href="../Soundness/#plfa_plfa-part3-Soundness-17624" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17658" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17660" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17664" href="../Soundness/#plfa_plfa-part3-Soundness-17634" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17666" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-17669" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17671" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li><p>Case <code>var</code>: We have <code>subst σ M ≡ y</code>, so <code>M</code> must also be a variable, say <code>x</code>. We apply the lemma <code>subst-reflect-var</code> to conclude.</p></li><li><p>Case <code>↦-elim</code>: We have <code>subst σ M ≡ L₁ · L₂</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ ` x</code>: We apply the <code>subst-reflect-var</code> lemma again to conclude.</p></li><li><p>Case <code>M ≡ M₁ · M₂</code>: By the induction hypothesis, we have some <code>δ₁</code> and <code>δ₂</code> such that <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>γ `⊢ σ ↓ δ₁</code>, as well as <code>δ₂ ⊢ M₂ ↓ v₁</code> and <code>γ `⊢ σ ↓ δ₂</code>. By <code>⊑-env</code> we have <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> (using <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>), and therefore <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>. We conclude this case by obtaining <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> by the <code>subst-⊔</code> lemma.</p></li></ul></li><li><p>Case <code>↦-intro</code>: We have <code>subst σ M ≡ ƛ L′</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ x</code>: We apply the <code>subst-reflect-var</code> lemma.</p></li><li><p>Case <code>M ≡ ƛ M′</code>: By the induction hypothesis, we have <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> and <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>. From the later we have <code>(δ , v₁) ⊢ # 0 ↓ v′</code>. By the lemma <code>var-inv</code> we have <code>v′ ⊑ v₁</code>, so by the <code>up-env</code> lemma we have <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code> and therefore <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>. We also need to show that <code>δ ⊢ σ ↓ δ′</code>. Fix <code>k</code>. We have <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>. We then apply the lemma <code>rename-inc-reflect</code> to obtain <code>δ ⊢ σ k ↓ δ k′</code>, so this case is complete.</p></li></ul></li><li><p>Case <code>⊥-intro</code>: We choose <code>⊥</code> for <code>δ</code>. We have <code>⊥ ⊢ M ↓ ⊥</code> by <code>⊥-intro</code>. We have <code>δ `⊢ σ ↓ `⊥</code> by the lemma <code>subst-⊥</code>.</p></li><li><p>Case <code>⊔-intro</code>: By the induction hypothesis we have <code>δ₁ ⊢ M ↓ v₁</code>, <code>δ₂ ⊢ M ↓ v₂</code>, <code>δ `⊢ σ ↓ δ₁</code>, and <code>δ `⊢ σ ↓ δ₂</code>. We have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> and <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code> by <code>⊑-env</code> with <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>. So by <code>⊔-intro</code> we have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>. By <code>subst-⊔</code> we conclude that <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>.</p></li></ul><h3 id="single-substitution-reflects-denotations">Single substitution reflects denotations</h3><p>Most of the work is now behind us. We have proved that simultaneous substitution reflects denotations. Of course, β reduction uses single substitution, so we need a corollary that proves that single substitution reflects denotations. That is, given terms <code>N : (Γ , ★ ⊢ ★)</code> and <code>M : (Γ ⊢ ★)</code>, if <code>γ ⊢ N [ M ] ↓ w</code>, then <code>γ ⊢ M ↓ v</code> and <code>(γ , v) ⊢ N ↓ w</code> for some value <code>v</code>. We have <code>N [ M ] = subst (subst-zero M) N</code>.</p><p>We first prove a lemma about <code>subst-zero</code>, that if <code>δ ⊢ subst-zero M ↓ γ</code>, then <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code> for some <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-20147" href="../Soundness/#plfa_plfa-part3-Soundness-20147" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20166" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20168" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20170" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20171" href="../Soundness/#plfa_plfa-part3-Soundness-20171" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20172" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20174" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20175" href="../Soundness/#plfa_plfa-part3-Soundness-20175" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20177" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20179" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20183" href="../Soundness/#plfa_plfa-part3-Soundness-20171" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20184" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20186" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20187" href="../Soundness/#plfa_plfa-part3-Soundness-20187" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20189" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20191" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20195" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20196" href="../Soundness/#plfa_plfa-part3-Soundness-20171" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20198" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20200" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20201" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20204" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20205" href="../Soundness/#plfa_plfa-part3-Soundness-20205" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20207" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20209" href="../Soundness/#plfa_plfa-part3-Soundness-20171" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20211" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20213" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20214" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20218" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20220" href="../Soundness/#plfa_plfa-part3-Soundness-20175" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20222" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20225" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-20236" href="../Soundness/#plfa_plfa-part3-Soundness-20205" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20238" href="../Soundness/#plfa_plfa-part3-Soundness-3146" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20240" href="../Soundness/#plfa_plfa-part3-Soundness-20187" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-20246" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20289" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20291" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20294" href="../Soundness/#plfa_plfa-part3-Soundness-20294" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-20296" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20298" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-20304" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20306" href="../Soundness/#plfa_plfa-part3-Soundness-20187" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20308" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20311" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20312" href="../Soundness/#plfa_plfa-part3-Soundness-20175" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20314" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20317" href="../Soundness/#plfa_plfa-part3-Soundness-20294" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-20318" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20320" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-20322" href="../Soundness/#plfa_plfa-part3-Soundness-20175" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20324" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20326" href="../Soundness/#plfa_plfa-part3-Soundness-20205" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20328" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20330" href="../Soundness/#plfa_plfa-part3-Soundness-20294" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-20332" href="../Soundness/#plfa_plfa-part3-Soundness-20147" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20351" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20352" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20354" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20356" href="../Soundness/#plfa_plfa-part3-Soundness-20356" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20357" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20359" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20360" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-20362" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20364" href="../Soundness/#plfa_plfa-part3-Soundness-20364" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20365" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20367" href="../Soundness/#plfa_plfa-part3-Soundness-20367" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20371" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20373" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20375" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20380" href="../Soundness/#plfa_plfa-part3-Soundness-20364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20382" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20384" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20386" href="../Soundness/#plfa_plfa-part3-Soundness-20414" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20392" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20394" href="../Soundness/#plfa_plfa-part3-Soundness-20367" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20398" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-20400" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-20402" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-20406" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-20414" href="../Soundness/#plfa_plfa-part3-Soundness-20414" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20420" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20422" href="../Soundness/#plfa_plfa-part3-Soundness-20364" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20424" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20427" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20428" href="../Soundness/#plfa_plfa-part3-Soundness-20356" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20430" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20433" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20438" href="../Soundness/#plfa_plfa-part3-Soundness-20364" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20439" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-20443" href="../Soundness/#plfa_plfa-part3-Soundness-20414" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20449" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-20452" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-20455" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-20464" href="../Soundness/#plfa_plfa-part3-Soundness-20414" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20470" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20471" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20473" href="../Soundness/#plfa_plfa-part3-Soundness-20473" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20474" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20476" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20478" href="../Compositional/#plfa_plfa-part3-Compositional-9818" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-20486" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20487" href="../Soundness/#plfa_plfa-part3-Soundness-20367" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20491" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20492" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20494" href="../Soundness/#plfa_plfa-part3-Soundness-20473" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20495" class="Symbol">))</a>
</pre><p>We choose <code>w</code> to be the last value in <code>γ</code> and we obtain <code>δ ⊢ M ↓ w</code> by applying the premise to variable <code>Z</code>. Finally, to prove <code>γ `⊑ (δ , w)</code>, we prove a lemma by induction in the input variable. The base case is trivial because of our choice of <code>w</code>. In the induction case, <code>S x</code>, the premise <code>δ ⊢ subst-zero M ↓ γ</code> gives us <code>δ ⊢ x ↓ γ (S x)</code> and then using <code>var-inv</code> we conclude that <code>γ (S x) ⊑ (δ `, w) (S x)</code>.</p><p>Now to prove that substitution reflects denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-20987" href="../Soundness/#plfa_plfa-part3-Soundness-20987" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21008" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21010" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-21012" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21013" href="../Soundness/#plfa_plfa-part3-Soundness-21013" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21014" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21016" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21017" href="../Soundness/#plfa_plfa-part3-Soundness-21017" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21019" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21021" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21025" href="../Soundness/#plfa_plfa-part3-Soundness-21013" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-21026" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21028" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21029" href="../Soundness/#plfa_plfa-part3-Soundness-21029" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21031" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21033" href="../Soundness/#plfa_plfa-part3-Soundness-21013" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-21035" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21037" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-21039" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21041" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-21042" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21044" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21045" href="../Soundness/#plfa_plfa-part3-Soundness-21045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21047" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21049" href="../Soundness/#plfa_plfa-part3-Soundness-21013" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-21051" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21053" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-21054" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21056" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21057" href="../Soundness/#plfa_plfa-part3-Soundness-21057" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21058" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-21062" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21064" href="../Soundness/#plfa_plfa-part3-Soundness-21017" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21066" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21068" href="../Soundness/#plfa_plfa-part3-Soundness-21029" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21070" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21072" href="../Soundness/#plfa_plfa-part3-Soundness-21045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21074" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-21076" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21078" href="../Soundness/#plfa_plfa-part3-Soundness-21057" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21084" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-21135" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21137" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-21140" href="../Soundness/#plfa_plfa-part3-Soundness-21140" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21142" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-21144" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-21150" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-21152" href="../Soundness/#plfa_plfa-part3-Soundness-21017" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21154" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21156" href="../Soundness/#plfa_plfa-part3-Soundness-21045" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21158" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21160" href="../Soundness/#plfa_plfa-part3-Soundness-21140" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-21163" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-21166" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21167" href="../Soundness/#plfa_plfa-part3-Soundness-21017" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21169" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-21172" href="../Soundness/#plfa_plfa-part3-Soundness-21140" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-21173" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21175" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21177" href="../Soundness/#plfa_plfa-part3-Soundness-21029" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21179" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21181" href="../Soundness/#plfa_plfa-part3-Soundness-21057" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21183" href="../Soundness/#plfa_plfa-part3-Soundness-20987" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21204" href="../Soundness/#plfa_plfa-part3-Soundness-21204" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21206" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21211" href="../Soundness/#plfa_plfa-part3-Soundness-15600" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21225" href="../Soundness/#plfa_plfa-part3-Soundness-21204" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21227" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21232" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-21237" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21239" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21241" href="../Soundness/#plfa_plfa-part3-Soundness-21241" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21243" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21245" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21247" href="../Soundness/#plfa_plfa-part3-Soundness-21247" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-21251" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21253" href="../Soundness/#plfa_plfa-part3-Soundness-21253" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21257" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21259" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21261" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21266" href="../Soundness/#plfa_plfa-part3-Soundness-20147" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-21285" href="../Soundness/#plfa_plfa-part3-Soundness-21247" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-21289" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21296" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21298" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21300" href="../Soundness/#plfa_plfa-part3-Soundness-21300" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21302" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21304" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21306" href="../Soundness/#plfa_plfa-part3-Soundness-21306" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21311" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21313" href="../Soundness/#plfa_plfa-part3-Soundness-21313" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21317" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21319" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21321" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21323" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21325" href="../Soundness/#plfa_plfa-part3-Soundness-21300" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21327" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21329" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21331" href="../Soundness/#plfa_plfa-part3-Soundness-21313" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21335" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21337" href="../Denotational/#plfa_plfa-part3-Denotational-25106" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21343" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21347" href="../Soundness/#plfa_plfa-part3-Soundness-21306" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21352" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21354" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We apply the <code>subst-reflect</code> lemma to obtain <code>δ ⊢ subst-zero M ↓ γ</code> and <code>γ ⊢ N ↓ v</code> for some <code>γ</code>. Using the former, the <code>subst-zero-reflect</code> lemma gives us <code>γ `⊑ (δ , w)</code> and <code>δ ⊢ M ↓ w</code>. We conclude that <code>δ , w ⊢ N ↓ v</code> by applying the <code>⊑-env</code> lemma, using <code>γ ⊢ N ↓ v</code> and <code>γ `⊑ (δ , w)</code>.</p><h3 id="reduction-reflects-denotations-1">Reduction reflects denotations</h3><p>Now that we have proved that substitution reflects denotations, we can easily prove that reduction does too.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-21815" href="../Soundness/#plfa_plfa-part3-Soundness-21815" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21828" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21830" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-21832" href="../Soundness/#plfa_plfa-part3-Soundness-21832" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21833" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21835" href="../Soundness/#plfa_plfa-part3-Soundness-21835" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21837" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21839" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21843" href="../Soundness/#plfa_plfa-part3-Soundness-21832" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21844" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21846" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21848" href="../Soundness/#plfa_plfa-part3-Soundness-21848" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21849" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21851" href="../Soundness/#plfa_plfa-part3-Soundness-21851" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21852" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-21858" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21860" href="../Soundness/#plfa_plfa-part3-Soundness-21835" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21862" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21864" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21865" href="../Soundness/#plfa_plfa-part3-Soundness-21848" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21867" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21869" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21871" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-21872" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21874" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21876" href="../Soundness/#plfa_plfa-part3-Soundness-21851" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21882" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21884" href="../Soundness/#plfa_plfa-part3-Soundness-21835" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21886" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21888" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21889" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21891" href="../Soundness/#plfa_plfa-part3-Soundness-21848" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21892" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21894" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21896" href="../Soundness/#plfa_plfa-part3-Soundness-21846" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21898" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21900" href="../Soundness/#plfa_plfa-part3-Soundness-21851" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21902" href="../Soundness/#plfa_plfa-part3-Soundness-21815" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21915" href="../Soundness/#plfa_plfa-part3-Soundness-21915" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-21921" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21926" href="../Soundness/#plfa_plfa-part3-Soundness-20987" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21947" href="../Soundness/#plfa_plfa-part3-Soundness-21915" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-21949" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21953" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21955" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21957" href="../Soundness/#plfa_plfa-part3-Soundness-21957" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-21961" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21963" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21965" href="../Soundness/#plfa_plfa-part3-Soundness-21965" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-21969" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21971" href="../Soundness/#plfa_plfa-part3-Soundness-21971" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-21975" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21977" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21979" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21981" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21988" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21989" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21997" href="../Soundness/#plfa_plfa-part3-Soundness-21971" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-22000" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22002" href="../Soundness/#plfa_plfa-part3-Soundness-21965" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-22008" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22016" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-22018" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-22020" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22021" href="../Soundness/#plfa_plfa-part3-Soundness-22021" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-22022" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22024" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22025" href="../Soundness/#plfa_plfa-part3-Soundness-22025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22027" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-22029" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-22033" href="../Soundness/#plfa_plfa-part3-Soundness-22021" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-22034" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22036" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22037" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22039" href="../Soundness/#plfa_plfa-part3-Soundness-22039" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-22042" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-22044" href="../Soundness/#plfa_plfa-part3-Soundness-22044" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-22045" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-22049" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22051" href="../Soundness/#plfa_plfa-part3-Soundness-22025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22053" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22055" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-22057" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22059" href="../Soundness/#plfa_plfa-part3-Soundness-22044" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-22062" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-22065" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22067" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-22070" href="../Soundness/#plfa_plfa-part3-Soundness-22039" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-22074" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-22078" href="../Soundness/#plfa_plfa-part3-Soundness-22039" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-22081" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-22083" href="../Soundness/#plfa_plfa-part3-Soundness-22042" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-22089" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-22125" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22127" href="../Soundness/#plfa_plfa-part3-Soundness-22025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22129" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22131" href="../Soundness/#plfa_plfa-part3-Soundness-22037" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22133" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22135" href="../Soundness/#plfa_plfa-part3-Soundness-22044" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-22137" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22145" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22149" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22150" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22153" href="../Soundness/#plfa_plfa-part3-Soundness-22153" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22154" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22156" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22159" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22167" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22171" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22172" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22175" href="../Soundness/#plfa_plfa-part3-Soundness-22175" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22176" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22178" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22181" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-22188" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22189" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22191" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22193" href="../Soundness/#plfa_plfa-part3-Soundness-22193" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22194" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22196" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22197" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22200" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22201" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22203" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22205" href="../Soundness/#plfa_plfa-part3-Soundness-22205" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22206" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-22209" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22211" href="../Soundness/#plfa_plfa-part3-Soundness-22211" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22218" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22223" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22226" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22227" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22229" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22231" href="../Soundness/#plfa_plfa-part3-Soundness-22193" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22232" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22234" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22236" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22238" href="../Soundness/#plfa_plfa-part3-Soundness-22205" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22239" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-22241" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22245" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22247" href="../Soundness/#plfa_plfa-part3-Soundness-22247" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22250" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22258" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22262" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22265" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22267" href="../Soundness/#plfa_plfa-part3-Soundness-21815" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22280" href="../Soundness/#plfa_plfa-part3-Soundness-22247" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22283" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22291" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22295" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22296" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22298" href="../Soundness/#plfa_plfa-part3-Soundness-22298" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22299" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22301" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22304" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22312" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22313" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22320" href="../Soundness/#plfa_plfa-part3-Soundness-22320" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22323" href="../Soundness/#plfa_plfa-part3-Soundness-22323" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22325" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22327" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22328" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22331" href="../Soundness/#plfa_plfa-part3-Soundness-22331" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22332" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22334" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22339" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22341" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22348" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22349" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22357" href="../Soundness/#plfa_plfa-part3-Soundness-22320" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22360" href="../Soundness/#plfa_plfa-part3-Soundness-22331" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22362" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22366" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22368" href="../Soundness/#plfa_plfa-part3-Soundness-22323" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22371" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22379" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22380" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22387" href="../Soundness/#plfa_plfa-part3-Soundness-22387" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22390" href="../Soundness/#plfa_plfa-part3-Soundness-22390" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22392" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22394" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22395" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22398" href="../Soundness/#plfa_plfa-part3-Soundness-22398" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22399" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22401" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22406" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22408" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22415" href="../Soundness/#plfa_plfa-part3-Soundness-22387" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22418" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22419" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22427" href="../Soundness/#plfa_plfa-part3-Soundness-22390" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22430" href="../Soundness/#plfa_plfa-part3-Soundness-22398" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22432" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22436" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22438" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22446" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22447" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22454" href="../Soundness/#plfa_plfa-part3-Soundness-22454" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22457" href="../Soundness/#plfa_plfa-part3-Soundness-22457" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22459" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22461" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22463" href="../Soundness/#plfa_plfa-part3-Soundness-22463" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22470" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22475" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22482" href="../Soundness/#plfa_plfa-part3-Soundness-22454" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22485" href="../Soundness/#plfa_plfa-part3-Soundness-22457" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22488" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22492" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22494" href="../Soundness/#plfa_plfa-part3-Soundness-22494" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22497" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22505" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22509" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22512" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22514" href="../Soundness/#plfa_plfa-part3-Soundness-21815" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22527" href="../Soundness/#plfa_plfa-part3-Soundness-22494" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22530" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22538" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22539" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22546" href="../Soundness/#plfa_plfa-part3-Soundness-22546" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22549" href="../Soundness/#plfa_plfa-part3-Soundness-22549" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22551" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22553" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22554" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22556" href="../Soundness/#plfa_plfa-part3-Soundness-22556" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22557" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22559" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22562" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22570" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22571" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22579" href="../Soundness/#plfa_plfa-part3-Soundness-22579" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22580" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22582" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22583" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22586" href="../Soundness/#plfa_plfa-part3-Soundness-22586" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22587" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22589" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22592" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22600" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22601" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22609" href="../Soundness/#plfa_plfa-part3-Soundness-22609" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22610" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22612" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22613" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22616" href="../Soundness/#plfa_plfa-part3-Soundness-22616" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22617" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22619" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22622" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22630" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22631" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22639" href="../Soundness/#plfa_plfa-part3-Soundness-22639" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22640" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22642" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22644" href="../Soundness/#plfa_plfa-part3-Soundness-22644" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22651" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22656" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22664" href="../Soundness/#plfa_plfa-part3-Soundness-22639" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-22666" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22670" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22672" href="../Soundness/#plfa_plfa-part3-Soundness-22672" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22675" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22683" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22687" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22690" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22692" href="../Soundness/#plfa_plfa-part3-Soundness-21815" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22705" href="../Soundness/#plfa_plfa-part3-Soundness-22672" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22708" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22716" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22717" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22725" href="../Soundness/#plfa_plfa-part3-Soundness-22725" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22726" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22728" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22729" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22731" href="../Soundness/#plfa_plfa-part3-Soundness-22731" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22732" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22734" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22739" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22741" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22749" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22750" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22758" href="../Soundness/#plfa_plfa-part3-Soundness-22725" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22760" href="../Soundness/#plfa_plfa-part3-Soundness-22731" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22762" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22766" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22768" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22776" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22784" href="../Soundness/#plfa_plfa-part3-Soundness-22784" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22786" href="../Soundness/#plfa_plfa-part3-Soundness-22786" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22789" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22791" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-22799" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22807" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22808" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22816" href="../Soundness/#plfa_plfa-part3-Soundness-22816" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22819" href="../Soundness/#plfa_plfa-part3-Soundness-22819" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22821" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22823" href="../Soundness/#plfa_plfa-part3-Soundness-22823" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22825" href="../Soundness/#plfa_plfa-part3-Soundness-22825" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22828" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22836" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22840" href="../Soundness/#plfa_plfa-part3-Soundness-22825" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22843" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-22848" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22856" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22857" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22865" href="../Soundness/#plfa_plfa-part3-Soundness-22816" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22868" href="../Soundness/#plfa_plfa-part3-Soundness-22823" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22870" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22874" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22876" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22877" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22885" href="../Soundness/#plfa_plfa-part3-Soundness-22819" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22888" href="../Soundness/#plfa_plfa-part3-Soundness-22823" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22890" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22894" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22896" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22904" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22905" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22909" href="../Soundness/#plfa_plfa-part3-Soundness-22909" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22911" href="../Soundness/#plfa_plfa-part3-Soundness-22911" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22913" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22915" href="../Soundness/#plfa_plfa-part3-Soundness-22915" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22917" href="../Soundness/#plfa_plfa-part3-Soundness-22917" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22920" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22922" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22926" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22927" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22935" href="../Soundness/#plfa_plfa-part3-Soundness-22909" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22937" href="../Soundness/#plfa_plfa-part3-Soundness-22915" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22939" href="../Soundness/#plfa_plfa-part3-Soundness-22917" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-22941" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22943" href="../Soundness/#plfa_plfa-part3-Soundness-22911" class="Bound">lt</a>
</pre><h2 id="reduction-implies-denotational-equality">Reduction implies denotational equality</h2><p>We have proved that reduction both preserves and reflects denotations. Thus, reduction implies denotational equality.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-23122" href="../Soundness/#plfa_plfa-part3-Soundness-23122" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23135" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23137" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-23139" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23140" href="../Soundness/#plfa_plfa-part3-Soundness-23140" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23141" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23143" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23144" href="../Soundness/#plfa_plfa-part3-Soundness-23144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23146" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23148" href="../Soundness/#plfa_plfa-part3-Soundness-23140" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23150" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23152" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23153" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23155" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23156" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23158" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23160" href="../Soundness/#plfa_plfa-part3-Soundness-23140" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23162" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23164" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23165" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23169" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23171" href="../Soundness/#plfa_plfa-part3-Soundness-23144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23173" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-23176" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23182" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-23194" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23196" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23198" href="../Soundness/#plfa_plfa-part3-Soundness-23144" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23200" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23202" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23204" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-23206" href="../Soundness/#plfa_plfa-part3-Soundness-23122" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23219" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23220" href="../Soundness/#plfa_plfa-part3-Soundness-23220" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23221" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23223" href="../Soundness/#plfa_plfa-part3-Soundness-23223" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-23224" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23226" href="../Soundness/#plfa_plfa-part3-Soundness-23226" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23227" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23229" href="../Soundness/#plfa_plfa-part3-Soundness-23229" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23231" href="../Soundness/#plfa_plfa-part3-Soundness-23231" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23233" href="../Soundness/#plfa_plfa-part3-Soundness-23233" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23235" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-23241" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23243" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23246" href="../Soundness/#plfa_plfa-part3-Soundness-23246" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23248" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23250" href="../Soundness/#plfa_plfa-part3-Soundness-6559" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-23259" href="../Soundness/#plfa_plfa-part3-Soundness-23246" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23261" href="../Soundness/#plfa_plfa-part3-Soundness-23229" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-23262" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23264" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23266" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23269" href="../Soundness/#plfa_plfa-part3-Soundness-23269" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23271" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23273" href="../Soundness/#plfa_plfa-part3-Soundness-22008" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-23281" href="../Soundness/#plfa_plfa-part3-Soundness-23269" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23283" href="../Soundness/#plfa_plfa-part3-Soundness-23229" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23285" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-23289" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23291" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We conclude with the <em>soundness property</em>, that multi-step reduction to a lambda abstraction implies denotational equivalence with a lambda abstraction.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-23460" href="../Soundness/#plfa_plfa-part3-Soundness-23460" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23470" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23472" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-23474" href="../Soundness/#plfa_plfa-part3-Soundness-23474" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23475" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23477" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23478" href="../Soundness/#plfa_plfa-part3-Soundness-23478" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23480" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23482" href="../Soundness/#plfa_plfa-part3-Soundness-23474" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23484" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23486" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23487" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23489" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23490" href="../Soundness/#plfa_plfa-part3-Soundness-23490" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23492" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23494" href="../Soundness/#plfa_plfa-part3-Soundness-23474" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23496" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23498" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-23500" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23502" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23503" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23507" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23509" href="../Soundness/#plfa_plfa-part3-Soundness-23478" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23511" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-23514" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23516" href="../Soundness/#plfa_plfa-part3-Soundness-23490" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23522" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-23542" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23544" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23546" href="../Soundness/#plfa_plfa-part3-Soundness-23478" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23548" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23550" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23552" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23553" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23555" href="../Soundness/#plfa_plfa-part3-Soundness-23490" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23556" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-23558" href="../Soundness/#plfa_plfa-part3-Soundness-23460" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23568" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23569" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-23571" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23573" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-23576" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-23577" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23579" href="../Soundness/#plfa_plfa-part3-Soundness-23579" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23581" href="../Soundness/#plfa_plfa-part3-Soundness-23581" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23583" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23585" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23587" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23590" href="../Soundness/#plfa_plfa-part3-Soundness-23590" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23592" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23594" href="../Soundness/#plfa_plfa-part3-Soundness-23590" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23595" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23597" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23599" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23602" href="../Soundness/#plfa_plfa-part3-Soundness-23602" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23604" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23606" href="../Soundness/#plfa_plfa-part3-Soundness-23602" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23607" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23609" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-23611" href="../Soundness/#plfa_plfa-part3-Soundness-23460" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23621" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23622" href="../Soundness/#plfa_plfa-part3-Soundness-23622" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23623" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23625" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23626" href="../Soundness/#plfa_plfa-part3-Soundness-23626" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-23628" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-23632" href="../Soundness/#plfa_plfa-part3-Soundness-23632" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23634" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-23636" href="../Soundness/#plfa_plfa-part3-Soundness-23636" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-23640" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23642" href="../Soundness/#plfa_plfa-part3-Soundness-23642" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23644" href="../Soundness/#plfa_plfa-part3-Soundness-23644" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23646" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-23651" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23655" href="../Soundness/#plfa_plfa-part3-Soundness-23655" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23658" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23660" href="../Soundness/#plfa_plfa-part3-Soundness-23460" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23670" href="../Soundness/#plfa_plfa-part3-Soundness-23636" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-23675" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23681" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23685" href="../Soundness/#plfa_plfa-part3-Soundness-23685" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23687" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23689" href="../Soundness/#plfa_plfa-part3-Soundness-23122" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23702" href="../Soundness/#plfa_plfa-part3-Soundness-23632" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23704" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23710" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-23718" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23719" href="../Soundness/#plfa_plfa-part3-Soundness-23622" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23720" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23722" href="../Soundness/#plfa_plfa-part3-Soundness-23685" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23724" href="../Soundness/#plfa_plfa-part3-Soundness-23655" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23727" href="../Soundness/#plfa_plfa-part3-Soundness-23642" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23729" href="../Soundness/#plfa_plfa-part3-Soundness-23644" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>